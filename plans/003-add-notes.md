# План 003: Добавление заметок (Meeting Notes)

## Цель (Objective)
Реализовать функционал добавления заметок к конкретному человеку (репорту).

## Шаги (Proposed Steps)

1.  **База данных (Models):**
    *   В `database/models.py` добавить модель `MeetingNote`.
    *   Поля:
        *   `id`: UUID (PK)
        *   `person`: FK -> `Person`
        *   `raw_text`: Text (Текст заметки)
        *   `created_at`: DateTime
        *   *Опциональные поля (пока nullable):* `stress_level` (Int), `rat_of_week` (Text), `shark_of_week` (Text).

2.  **Интерфейс (Keyboards):**
    *   Создать `keyboards/people_kb.py`.
    *   Изменить команду `/my_team`: вместо простого списка выводить список с Inline-кнопками (Имя сотрудника).
    *   При нажатии на имя -> предлагать действия: "Добавить заметку", "Посмотреть историю".

3.  **Хендлеры (Handlers):**
    *   Создать `handlers/notes.py`.
    *   Реализовать FSM `AddNoteState`:
        *   `waiting_for_note`: Ожидание текста заметки после выбора сотрудника.
    *   Обработка CallbackQuery (нажатие на сотрудника).
    *   Сохранение заметки в БД.

4.  **Просмотр (MVP):**
    *   Добавить простую возможность посмотреть последние 5 заметок по сотруднику (через кнопку "История" или команду).

## Риски
*   Сложность с навигацией (нужна кнопка "Назад" или "Отмена").
*   Пользователь может забыть, что он в режиме ввода заметки. (Решение: кнопка "Отмена" в сообщении с просьбой ввести текст).

## Стратегия отката
*   Удалить модель `MeetingNote`.
*   Вернуть старый текстовый вывод `/my_team`.

