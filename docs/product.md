# Product Documentation

## Видение продукта (Vision)
Телеграм-бот "Meeting Manager Assistant" (название рабочее), предназначенный для менеджеров с большим количеством встреч (1-1, командные синки). 
Основная цель — упростить ведение заметок, структурировать информацию о сотрудниках (репортах), отслеживать их эмоциональное состояние и автоматически превращать заметки в задачи.
В будущем планируется трансформация в Telegram Mini App.

## Проблематика
*   Много встреч, заметки ведутся разрозненно (текстовые файлы).
*   Сложно отслеживать динамику настроения сотрудников (выгорание).
*   Сложно выделять и трекать задачи (Action Items) из потока заметок.
*   Потеря контекста между встречами.

## Основной функционал (MVP)

### 1. Управление сущностями "Встречи" / "Люди"
*   Создание профиля человека (Direct Report) или регулярной встречи.
*   Привязка заметок к конкретному человеку/контексту.
*   Команды: `/add_person`, `/my_team`.

### 2. Ведение заметок (Note Taking)
*   **Свободный ввод:** Пользователь пишет заметки текстом в бот.
*   **AI-Анализ (New):** Каждая заметка автоматически анализируется через GPT-4o-mini.
*   **Результат анализа:** Бот возвращает структурированный ответ:
    *   Настроение (Mood Score 1-10 + Описание).
    *   Краткая выжимка (Summary).
    *   Список задач (Action Items).
    *   Плюсы/Минусы (Positive/Negative).
    *   Теги (для поиска).

### 3. Структурированные данные (Optional Fields)
Для 1-1 с репортами поддерживается сбор метрик (опционально, через AI):
*   **Уровень стресса (Stress Level):** Числовое значение (извлекается AI).
*   **Источник стресса:** Текстовое описание.
*   **Крыса недели (Rat of the Week):** Кто-то или что-то, что расстроило/разозлило.
*   **Акула недели (Shark of the Week):** Кто-то или что-то, что порадовало.

### 4. Управление задачами (Task Management)
*   **Конвертация в Todos:** Автоматическое извлечение задач из текста заметок (AI).
*   **Интеграция с Todoist:** (Планируется) Создание задач напрямую в Todoist пользователя.

### 5. История и Импорт
*   **Импорт:** Возможность разовой загрузки истории прошлых встреч (из текста/файла).
*   **Хранение:** Вся история сохраняется в БД (PostgreSQL-ready).
*   **Просмотр:** Кнопка "История" показывает последние 5 заметок.

### 6. Аналитика и Саммари
*   **Трекинг настроения:** Графики/отчеты изменения уровня стресса сотрудника для предотвращения выгорания.
*   **Анализ топиков:** Выявление часто повторяющихся тем.
*   **Саммари:** Генерация кратких итогов по встречам и заметкам (AI-summary).

## Пользовательские сценарии (User Stories)

1.  **Добавление сотрудника:**
    *   Я как менеджер хочу добавить своего репорта "Алексей", чтобы начать вести историю наших 1-1.
2.  **Логирование встречи (AI Flow):**
    *   Я пишу заметку: "Леша устал, жаловался на API, но рад, что закрыли спринт. Надо дать ему отгул."
    *   Бот анализирует и отвечает:
        *   Mood: 4/10 (Усталость).
        *   Positive: Закрыли спринт.
        *   Negative: Жалобы на API.
        *   Todo: Дать отгул.
        *   Tags: #Алексей #1-1
3.  **Просмотр аналитики:**
    *   Я хочу посмотреть, как менялось настроение "Алексея" за последний месяц, чтобы понять, не выгорает ли он.

## Технический стек
*   Python 3.11+
*   aiogram 3.x
*   Tortoise ORM (PostgreSQL driver `asyncpg` added)
*   SQLite (Dev) / PostgreSQL (Prod)
*   OpenAI API (gpt-4o-mini)

## План развития
1.  **Бот (MVP):** Текстовый интерфейс, базовое сохранение, простая аналитика. (✅ Выполнено)
2.  **AI Analysis:** Автоматический разбор заметок. (✅ Выполнено)
3.  **Интеграции:** Подключение Todoist API.
4.  **Mini App:** Визуальный интерфейс для просмотра графиков и управления заметками внутри Telegram.
